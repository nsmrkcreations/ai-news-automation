<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<title>NewSurgeAI - Article</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“°</text></svg>">
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script src="/js/main.js" defer></script>
<script src="/js/news-data-integration.js" defer></script>
<style type="text/tailwindcss">
      :root {
        --primary-color: #13a4ec;
      }
      body {
        font-family: 'Inter', sans-serif;
      }
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-['Inter',_sans-serif] min-h-screen flex flex-col">
    <!-- Navigation -->
    <header class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">
                <!-- Logo -->
                <a class="flex items-center gap-2 md:gap-4" href="/">
                    <div class="text-[var(--primary-color)]">
                        <svg class="h-6 w-6 md:h-8 md:w-8" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path clip-rule="evenodd" d="M24 4H42V17.3333V30.6667H24V44H6V30.6667V17.3333H24V4Z" fill="currentColor" fill-rule="evenodd"></path>
                        </svg>
                    </div>
                    <h1 class="text-lg md:text-2xl font-bold tracking-tight text-gray-900 dark:text-gray-100">NewSurgeAI</h1>
                </a>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center gap-8">
                    <a class="text-base font-medium text-gray-600 dark:text-gray-300 hover:text-[var(--primary-color)] transition-colors" href="./">Home</a>
                    <a class="text-base font-medium text-gray-600 dark:text-gray-300 hover:text-[var(--primary-color)] transition-colors" href="./categories.html">Categories</a>
                    <a class="text-base font-medium text-gray-600 dark:text-gray-300 hover:text-[var(--primary-color)] transition-colors" href="./about.html">About</a>
                </nav>

                <!-- Desktop Theme Toggle -->
                <div class="hidden md:flex items-center gap-4">
                    <button class="flex items-center justify-center p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] transition-colors" id="theme-toggle" aria-label="Toggle dark mode">
                        <i class="material-icons block dark:hidden">light_mode</i>
                        <i class="material-icons hidden dark:block">dark_mode</i>
                    </button>
                </div>

                <!-- Mobile Menu Button & Theme Toggle -->
                <div class="flex md:hidden items-center gap-2">
                    <button class="flex items-center justify-center p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] transition-colors" id="mobile-theme-toggle" aria-label="Toggle dark mode">
                        <i class="material-icons block dark:hidden text-lg">light_mode</i>
                        <i class="material-icons hidden dark:block text-lg">dark_mode</i>
                    </button>
                </div>
            </div>
        </div>
    </header>
<    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8">
        <!-- Loading State -->
        <div id="loading-state" class="text-center py-12">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--primary-color)] mx-auto mb-4"></div>
            <p class="text-gray-600 dark:text-gray-400">Loading article...</p>
        </div>

        <!-- Article Content Container -->
        <div id="article-content" class="hidden">
            <!-- Dynamic content will be loaded here -->
        </div>

        <!-- Error State -->
        <div id="error-state" class="hidden text-center py-12">
            <i class="material-icons text-5xl text-red-400 mb-4">error_outline</i>
            <h3 class="text-xl font-medium text-gray-600 dark:text-gray-300 mb-2">Article Not Found</h3>
            <p class="text-gray-500 mb-4">The article you're looking for could not be found.</p>
            <a href="./" class="inline-flex items-center px-4 py-2 bg-[var(--primary-color)] text-white rounded-md hover:opacity-90 transition-opacity">
                <i class="material-icons mr-2">arrow_back</i>
                Back to Home
            </a>
        </div>
    </main>
</div>
    <script>
        // Theme Toggle Script - Initialize immediately
        (function() {
            const html = document.documentElement;
            
            // Check for saved user preference, if any, on page load
            const savedTheme = localStorage.getItem('theme') || 'light';
            html.classList.toggle('dark', savedTheme === 'dark');
            
            // Function to toggle theme
            const toggleTheme = () => {
                html.classList.toggle('dark');
                const isDark = html.classList.contains('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            };
            
            // Wait for DOM to be ready
            document.addEventListener('DOMContentLoaded', () => {
                // Desktop theme toggle
                const themeToggle = document.getElementById('theme-toggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', toggleTheme);
                }
                
                // Mobile theme toggle
                const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
                if (mobileThemeToggle) {
                    mobileThemeToggle.addEventListener('click', toggleTheme);
                }
            });
        })();

        // Article Loading Script
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const articleId = urlParams.get('id');
            
            const loadingState = document.getElementById('loading-state');
            const articleContent = document.getElementById('article-content');
            const errorState = document.getElementById('error-state');
            
            if (!articleId) {
                loadingState.classList.add('hidden');
                errorState.classList.remove('hidden');
                return;
            }
            
            try {
                // Load news data
                const response = await fetch('/data/news.json');
                const newsData = await response.json();
                
                // Find the article
                const article = newsData.find(a => a.url === decodeURIComponent(articleId));
                
                if (!article) {
                    loadingState.classList.add('hidden');
                    errorState.classList.remove('hidden');
                    return;
                }
                
                // Render the article
                renderArticle(article);
                
                loadingState.classList.add('hidden');
                articleContent.classList.remove('hidden');
                
            } catch (error) {
                console.error('Error loading article:', error);
                loadingState.classList.add('hidden');
                errorState.classList.remove('hidden');
            }
        });

        function renderArticle(article) {
            const articleContent = document.getElementById('article-content');
            const isAIEnhanced = article.aiEnhanced || article.aiBadge;
            
            // Extract image URL
            const imageUrl = extractImageUrl(article);
            const publishedDate = new Date(article.publishedAt);
            const sourceName = article.source?.name || 'Unknown Source';
            
            // AI-Enhanced Content Processing
            const aiProcessedContent = generateAIContent(article);
            const readingTime = calculateReadingTime(aiProcessedContent.fullContent);
            
            document.title = `${article.title} - NewSurgeAI`;
            
            articleContent.innerHTML = `
                <article class="max-w-4xl mx-auto">
                    <!-- Breadcrumb -->
                    <nav class="mb-6">
                        <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                            <a href="./" class="hover:text-[var(--primary-color)]">Home</a>
                            <i class="material-icons mx-2 text-sm">chevron_right</i>
                            <a href="./categories.html?category=${article.category}" class="hover:text-[var(--primary-color)] capitalize">${article.category || 'General'}</a>
                            <i class="material-icons mx-2 text-sm">chevron_right</i>
                            <span>Article</span>
                        </div>
                    </nav>

                    <!-- AI Enhancement Badge -->
                    <div class="mb-6">
                        <div class="inline-flex items-center px-4 py-2 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 text-white font-medium shadow-lg">
                            <i class="material-icons mr-2">smart_toy</i>
                            AI Enhanced & Optimized for Reading
                        </div>
                    </div>

                    <!-- Article Header -->
                    <header class="mb-8">
                        <div class="flex flex-wrap items-center gap-3 mb-4">
                            <span class="px-3 py-1 bg-[var(--primary-color)] text-white text-sm rounded-full capitalize">${article.category || 'General'}</span>
                            <span class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-full">
                                ${readingTime} min read
                            </span>
                            <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 text-sm rounded-full">
                                ${aiProcessedContent.wordCount} words
                            </span>
                        </div>
                        
                        <h1 class="text-2xl md:text-4xl lg:text-5xl font-bold leading-tight mb-6 text-gray-900 dark:text-gray-100">
                            ${article.title}
                        </h1>
                        
                        <div class="flex flex-wrap items-center text-gray-600 dark:text-gray-400 text-sm mb-6">
                            <span class="font-medium">${sourceName}</span>
                            <span class="mx-3">â€¢</span>
                            <span>${publishedDate.toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}</span>
                            ${article.author ? `
                                <span class="mx-3">â€¢</span>
                                <span>By ${article.author}</span>
                            ` : ''}
                        </div>
                    </header>

                    <!-- AI Summary Section -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-xl mb-8 border border-blue-200 dark:border-blue-800">
                        <h2 class="flex items-center text-xl font-bold mb-4 text-blue-700 dark:text-blue-300">
                            <i class="material-icons mr-2">auto_awesome</i>
                            AI Summary
                        </h2>
                        <p class="text-gray-700 dark:text-gray-300 text-lg leading-relaxed">${aiProcessedContent.summary}</p>
                    </div>

                    <!-- Key Points Section -->
                    ${aiProcessedContent.keyPoints.length > 0 ? `
                        <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl mb-8">
                            <h2 class="flex items-center text-xl font-bold mb-4 text-gray-900 dark:text-gray-100">
                                <i class="material-icons mr-2">key</i>
                                Key Points
                            </h2>
                            <ul class="space-y-3">
                                ${aiProcessedContent.keyPoints.map(point => `
                                    <li class="flex items-start">
                                        <i class="material-icons text-[var(--primary-color)] mr-3 mt-1 text-sm">arrow_right</i>
                                        <span class="text-gray-700 dark:text-gray-300">${point}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    ` : ''}

                    <!-- Article Image (Smaller for content focus) -->
                    ${imageUrl ? `
                        <div class="mb-8">
                            <img src="${imageUrl}" alt="${article.title}" 
                                 class="w-full h-48 md:h-64 object-cover rounded-xl shadow-lg"
                                 onerror="this.style.display='none';">
                        </div>
                    ` : ''}

                    <!-- Main Article Content -->
                    <div class="prose prose-lg dark:prose-invert max-w-none">
                        <div class="text-gray-700 dark:text-gray-300 leading-relaxed space-y-6">
                            ${aiProcessedContent.formattedContent}
                        </div>
                    </div>

                    <!-- AI Analysis Section -->
                    ${aiProcessedContent.analysis ? `
                        <div class="mt-8 bg-purple-50 dark:bg-purple-900/20 p-6 rounded-xl border border-purple-200 dark:border-purple-800">
                            <h2 class="flex items-center text-xl font-bold mb-4 text-purple-700 dark:text-purple-300">
                                <i class="material-icons mr-2">psychology</i>
                                AI Analysis
                            </h2>
                            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">${aiProcessedContent.analysis}</p>
                        </div>
                    ` : ''}

                    <!-- Original Source Section -->
                    <div class="mt-8 p-6 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-xl border">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">Read the Original Article</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Get the full story from the original source</p>
                            </div>
                            <a href="${article.url}" target="_blank" rel="noopener noreferrer" 
                               class="inline-flex items-center px-6 py-3 bg-[var(--primary-color)] text-white rounded-lg hover:opacity-90 transition-opacity font-medium shadow-lg">
                                <i class="material-icons mr-2">open_in_new</i>
                                Original Source
                            </a>
                        </div>
                    </div>

                    <!-- Share Section -->
                    <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                            <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Share this AI-enhanced article:</span>
                            <div class="flex gap-3">
                                <button onclick="shareArticle('twitter')" class="flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                    <i class="material-icons mr-2 text-sm">share</i>
                                    Twitter
                                </button>
                                <button onclick="shareArticle('facebook')" class="flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                                    <i class="material-icons mr-2 text-sm">share</i>
                                    Facebook
                                </button>
                                <button onclick="copyArticleLink()" class="flex items-center px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                                    <i class="material-icons mr-2 text-sm">link</i>
                                    Copy Link
                                </button>
                            </div>
                        </div>
                    </div>
                </article>
            `;
        }

        function extractImageUrl(article) {
            if (article.imageUrl && isValidUrl(article.imageUrl)) {
                return article.imageUrl;
            }
            if (article.urlToImage && isValidUrl(article.urlToImage)) {
                return article.urlToImage;
            }
            return null;
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function stripHtml(html) {
            if (!html) return '';
            try {
                const tmp = document.createElement('div');
                tmp.innerHTML = html;
                return tmp.textContent || tmp.innerText || '';
            } catch (error) {
                return String(html).replace(/<[^>]*>?/gm, '');
            }
        }

        function shareArticle(platform) {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent(document.title);
            
            let shareUrl = '';
            if (platform === 'twitter') {
                shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
            } else if (platform === 'facebook') {
                shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }

        function generateAIContent(article) {
            const cleanDescription = stripHtml(article.description || '');
            const cleanContent = stripHtml(article.content || '');
            const fullText = `${cleanDescription} ${cleanContent}`.trim();
            
            // AI-Enhanced Summary (limit to 200 words)
            const summary = generateAISummary(cleanDescription, article.title);
            
            // Extract key points
            const keyPoints = extractKeyPoints(fullText);
            
            // Format content for better readability
            const formattedContent = formatContentForReading(fullText, 2500);
            
            // Generate AI analysis
            const analysis = generateAIAnalysis(article);
            
            return {
                summary,
                keyPoints,
                formattedContent,
                analysis,
                fullContent: formattedContent,
                wordCount: countWords(formattedContent)
            };
        }

        function generateAISummary(description, title) {
            // AI-style summary generation (simulated)
            const sentences = description.split(/[.!?]+/).filter(s => s.trim().length > 10);
            
            if (sentences.length === 0) {
                return `This article discusses ${title.toLowerCase()}, providing insights and analysis on the topic.`;
            }
            
            // Take first 2-3 most relevant sentences and enhance them
            const keySentences = sentences.slice(0, Math.min(3, sentences.length));
            let summary = keySentences.join('. ').trim();
            
            // Ensure it ends with a period
            if (!summary.endsWith('.')) {
                summary += '.';
            }
            
            // Add AI enhancement context
            if (summary.length < 100) {
                summary += ` This AI-enhanced article provides comprehensive coverage and analysis of the key developments and implications.`;
            }
            
            return summary;
        }

        function extractKeyPoints(content) {
            const sentences = content.split(/[.!?]+/).filter(s => s.trim().length > 20);
            const keyPoints = [];
            
            // Look for sentences with key indicators
            const keyIndicators = [
                'important', 'significant', 'major', 'key', 'critical', 'essential',
                'announced', 'revealed', 'discovered', 'found', 'shows', 'indicates',
                'according to', 'research', 'study', 'report', 'data', 'statistics'
            ];
            
            sentences.forEach(sentence => {
                const lowerSentence = sentence.toLowerCase();
                const hasKeyIndicator = keyIndicators.some(indicator => lowerSentence.includes(indicator));
                
                if (hasKeyIndicator && sentence.trim().length > 30 && sentence.trim().length < 200) {
                    keyPoints.push(sentence.trim());
                }
            });
            
            // Limit to 5 key points
            return keyPoints.slice(0, 5);
        }

        function formatContentForReading(content, maxWords = 2500) {
            if (!content) return '<p>Content is being processed by our AI system for optimal readability.</p>';
            
            // Split into sentences
            const sentences = content.split(/[.!?]+/).filter(s => s.trim().length > 10);
            
            // Group sentences into paragraphs (3-4 sentences each)
            const paragraphs = [];
            let currentParagraph = [];
            let wordCount = 0;
            
            for (let sentence of sentences) {
                const sentenceWords = countWords(sentence);
                
                if (wordCount + sentenceWords > maxWords) {
                    break;
                }
                
                currentParagraph.push(sentence.trim());
                wordCount += sentenceWords;
                
                // Create paragraph every 3-4 sentences
                if (currentParagraph.length >= 3 + Math.floor(Math.random() * 2)) {
                    paragraphs.push(currentParagraph.join('. ') + '.');
                    currentParagraph = [];
                }
            }
            
            // Add remaining sentences as final paragraph
            if (currentParagraph.length > 0) {
                paragraphs.push(currentParagraph.join('. ') + '.');
            }
            
            // Format as HTML paragraphs
            return paragraphs.map(p => `<p class="text-lg leading-relaxed mb-6">${p}</p>`).join('');
        }

        function generateAIAnalysis(article) {
            const category = article.category || 'general';
            const title = article.title.toLowerCase();
            
            // Generate contextual analysis based on category and content
            const analysisTemplates = {
                technology: "This development represents a significant advancement in the technology sector, with potential implications for industry standards and future innovation.",
                business: "From a business perspective, this news could impact market dynamics and present new opportunities for stakeholders in the industry.",
                science: "The scientific implications of this research contribute to our understanding of the field and may influence future studies and applications.",
                politics: "This political development may have broader implications for policy-making and could influence future governmental decisions.",
                health: "This health-related news provides important insights that could affect public health policies and individual healthcare decisions.",
                sports: "This sports news highlights important developments in the athletic world and may influence future competitions and athlete performance.",
                entertainment: "This entertainment news reflects current trends in the industry and may influence future content creation and audience preferences."
            };
            
            let baseAnalysis = analysisTemplates[category] || analysisTemplates.technology;
            
            // Add specific context based on title keywords
            if (title.includes('ai') || title.includes('artificial intelligence')) {
                baseAnalysis += " The AI implications of this development could reshape how we approach automation and machine learning in various sectors.";
            } else if (title.includes('climate') || title.includes('environment')) {
                baseAnalysis += " The environmental impact and sustainability aspects of this news are particularly relevant in today's climate-conscious world.";
            } else if (title.includes('economic') || title.includes('financial')) {
                baseAnalysis += " The economic ramifications could influence market trends and investment strategies in the coming months.";
            }
            
            return baseAnalysis;
        }

        function calculateReadingTime(content) {
            const wordsPerMinute = 200; // Average reading speed
            const wordCount = countWords(content);
            return Math.max(1, Math.ceil(wordCount / wordsPerMinute));
        }

        function countWords(text) {
            if (!text) return 0;
            return stripHtml(text).split(/\s+/).filter(word => word.length > 0).length;
        }

        function copyArticleLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                // Show a temporary notification
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                notification.innerHTML = '<i class="material-icons mr-2 text-sm">check</i>Link copied to clipboard!';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 3000);
            });
        }
    </script>
</body></html>